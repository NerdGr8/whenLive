/*! whenlive 2014-01-11 */
!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],b):b(jQuery)}(this,function(a){var b=window.MutationObserver||window.WebKitMutationObserver;a.fn.whenLive=function(c,d){var e=this;if("function"==typeof c?(d=c,c={}):"object"!=typeof c&&(c={}),"boolean"!=typeof c.visibility&&(c.visibility=!1),"function"==typeof d){a.whenLiveElements||(a.whenLiveElements=[]);var f=function(b){b||(b=document.documentElement);for(var c in a.whenLiveElements)(a.contains(b,a.whenLiveElements[c].elem[0])||b===a.whenLiveElements[c].elem[0])&&(a.whenLiveElements[c].options.visibility?a.whenLiveElements[c].elem.is(":visible")&&(a.whenLiveElements[c].fn.call(a.whenLiveElements[c].elem),a.whenLiveElements.splice(c)):(a.whenLiveElements[c].fn.call(a.whenLiveElements[c].elem),a.whenLiveElements.splice(c)))};if(!a.whenLiveInit)if(a.whenLiveInit=!0,b){var g=new WebKitMutationObserver(function(b){for(var c=0;c<b.length;c++){var d=b[c];if(f(d.target),a.whenLiveElements.length)for(var e=0;e<d.addedNodes.length;e++){var g=d.addedNodes[e];f(g)}}});g.observe(document,{childList:!0,subtree:!0,attributes:!0})}else!function(){for(var a=0,b=["webkit","moz"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),a.whenLiveLoop=function(){f(),a.whenLiveElements.length>0&&requestAnimationFrame(a.whenLiveLoop)};jQuery.contains(document.documentElement,this[0])?c.visibility?a(this).is(":visible")&&d():d():(a.whenLiveElements.push({elem:e,fn:d,options:c}),b||1===a.whenLiveElements.length&&requestAnimationFrame(a.whenLiveLoop))}}});